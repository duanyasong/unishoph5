(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/order/confirm"],{"09ef":function(t,a,e){"use strict";(function(t){Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var s=e("3b97"),i=0,r=[],o="",c={data:function(){return{pageLoad:!1,pageData:{},pay_type:"wxpay"}},onLoad:function(t){this.getPage(t.cart_id)},methods:{goAddress:function(){t.navigateTo({url:"/pages/user_address/add"})},getPage:function(a){var e=this;t.request({url:s.apiHost+"?m=order&a=confirm&ajax=1",data:{authcode:s.getAuthCode(),cart_id:a},success:function(t){e.pageLoad=!0,e.pageData=t.data.data;for(var a=0;a<t.data.data.prolist.length;a++)r.push(t.data.data.prolist[a].id)}})},setAddress:function(t){i=t.detail.value},setPayType:function(t){this.pay_type=t},formSubmit:function(a){console.log("wwwwwww");o=a.detail.value.comment,t.request({url:s.apiHost+"?m=order&a=order&ajax=1&authcode="+s.getAuthCode(),header:{"content-type":"application/x-www-form-urlencoded"},data:{cart_id:r,user_address_id:i,pay_type:this.pay_type,comment:o},method:"POST",success:function(a){t.showToast({title:a.data.message}),a.data.error||t.redirectTo({url:"/pages/order/success"})}})},wxpay:function(a){a=a;t.request({url:s.apiHost+"?fromapp=wxapp&m=recharge_wxapp_pay&a=go",data:{order_id:a,openid:t.getStorageSync("openid")},success:function(a){t.requestPayment({appId:a.data.appId,timeStamp:a.data.timeStamp,nonceStr:a.data.nonceStr,package:a.data.package,signType:"MD5",paySign:a.data.paySign,success:function(a){t.redirectTo({url:"/pages/order/show?order_id="+a.data.data.order_id})},fail:function(a){t.redirectTo({url:"/pages/order/show?order_id="+a.data.data.order_id})}})},fail:function(t){console.log(t)}})}}};a.default=c}).call(this,e("543d")["default"])},"2d4e":function(t,a,e){"use strict";e("53c4");var s=r(e("b0ce")),i=r(e("c46c"));function r(t){return t&&t.__esModule?t:{default:t}}Page((0,s.default)(i.default))},"3c6e":function(t,a,e){"use strict";var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("view",{staticClass:"bg-ef"},[t.pageLoad?e("form",{attrs:{eventid:"849aa3d0-3"},on:{submit:t.formSubmit}},[e("view",{staticClass:"row-box mgb-10"},[e("view",{staticClass:"row-box-hd mgb-10"},[t._v("收货地址"),e("view",{staticClass:"flex-1"}),e("view",{staticClass:" f14 cor2",attrs:{eventid:"849aa3d0-0"},on:{click:function(a){t.goAddress()}}},[t._v("新增地址")])]),e("radio-group",{staticClass:"radio-group",attrs:{eventid:"849aa3d0-1",mpcomid:"849aa3d0-0"},on:{change:t.setAddress}},t._l(t.pageData.address,function(a,s,i){return e("view",{key:s,staticClass:"mgb-10 flex"},[e("radio",{attrs:{value:a.id,checked:0==i}}),t._v(t._s(i)+" "+t._s(a.truename)+" "+t._s(a.telephone)+" "+t._s(a.pct_address))],1)}))],1),e("view",{staticClass:"row-box mgb-10"},[e("view",{staticClass:"f16"},[t._v("商品列表")]),e("view",{staticClass:"flexlist"},t._l(t.pageData.prolist,function(a,s){return e("view",{key:s,staticClass:"flexlist-item"},[e("view",{staticClass:"none"},[e("input",{attrs:{type:"text",name:"cart_id[]",value:a.id}})]),e("view",{staticClass:"flexlist-imgbox"},[e("img",{staticClass:"flexlist-img",attrs:{src:a.imgurl+".100x100.jpg"}})]),e("view",{staticClass:"flex-1"},[e("view",{staticClass:"flexlist-title"},[t._v(t._s(a.title))]),e("view",{staticClass:"flex"},[""!=a.ks_title?e("view",{staticClass:"cl2 mgr-10"},[t._v(t._s(a.ks_title))]):t._e(),e("view",{staticClass:"cl-money mgr-10"},[t._v("￥ "+t._s(a.price))]),e("view",{staticClass:"cl2"},[t._v("x "+t._s(a.amount))])])])])}))]),e("view",{staticClass:"row-box mgb-10"},[e("view",{staticClass:"cart-stat mgb-10 flex"},[t._v("商品：￥"),e("text",{staticClass:"cl-money"},[t._v(t._s(t.pageData.goods_money))]),t._v("元 \n\t\t\t\t  邮费：￥"),e("text",{staticClass:"cl-money"},[t._v(t._s(t.pageData.express_fee))]),t._v("元  \n\t\t\t\t  总价：￥"),e("text",{staticClass:"cl-money"},[t._v(t._s(t.pageData.total_money))])]),e("view",{staticClass:"cart-stat flex"},[t._v("账户余额："),e("text",{staticClass:"clmoney"},[t._v(t._s(t.pageData.user.money))]),t._v("元")])]),e("view",{staticClass:"row-box mgb-10"},[e("view",{staticClass:"row-box-hd mgb-10"},[t._v("支付方式")]),e("view",{staticClass:"paylist"},[e("view",{staticClass:"none"},[e("input",{attrs:{type:"hidden",name:"pay_type",id:"pay_type",value:t.pay_type}})]),t._l(t.pageData.pay_type_list,function(a,s){return e("view",{key:s,staticClass:"paylist-item",class:s==t.pay_type?"paylist-item-active":"",attrs:{eventid:"849aa3d0-2-"+s},on:{click:function(a){t.setPayType(s)}}},[t._v(t._s(a))])})],2)]),e("view",{staticClass:"row-box"},[e("view",{staticClass:"mgb-10"},[e("textarea",{staticClass:"h60",attrs:{name:"comment",placeholder:"请输入订单需求"}})]),e("button",{staticClass:"btn-row-submit",attrs:{type:"primary","form-type":"submit"}},[t._v("确认下单")])],1)]):t._e()],1)},i=[];e.d(a,"a",function(){return s}),e.d(a,"b",function(){return i})},c46c:function(t,a,e){"use strict";e.r(a);var s=e("3c6e"),i=e("e066");for(var r in i)"default"!==r&&function(t){e.d(a,t,function(){return i[t]})}(r);var o=e("2877"),c=Object(o["a"])(i["default"],s["a"],s["b"],!1,null,null,null);a["default"]=c.exports},e066:function(t,a,e){"use strict";e.r(a);var s=e("09ef"),i=e.n(s);for(var r in s)"default"!==r&&function(t){e.d(a,t,function(){return s[t]})}(r);a["default"]=i.a}},[["2d4e","common/runtime","common/vendor"]]]);