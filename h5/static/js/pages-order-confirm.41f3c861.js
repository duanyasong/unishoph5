(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-order-confirm"],{c46c:function(t,a,e){"use strict";e.r(a);var i=e("ea32"),s=e("e066");for(var n in s)"default"!==n&&function(t){e.d(a,t,function(){return s[t]})}(n);var o=e("2877"),r=Object(o["a"])(s["default"],i["a"],i["b"],!1,null,"edf0e662",null);a["default"]=r.exports},e066:function(t,a,e){"use strict";e.r(a);var i=e("e3e7"),s=e.n(i);for(var n in i)"default"!==n&&function(t){e.d(a,t,function(){return i[t]})}(n);a["default"]=s.a},e3e7:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var i=e("3b97"),s=0,n=[],o="",r={data:function(){return{pageLoad:!1,pageData:{},pay_type:"wxpay"}},onLoad:function(t){this.getPage(t.cart_id)},methods:{goAddress:function(){uni.navigateTo({url:"/pages/user_address/add"})},getPage:function(t){var a=this;uni.request({url:i.apiHost+"?m=order&a=confirm&ajax=1",data:{authcode:i.getAuthCode(),cart_id:t},success:function(t){a.pageLoad=!0,a.pageData=t.data.data;for(var e=0;e<t.data.data.prolist.length;e++)n.push(t.data.data.prolist[e].id)}})},setAddress:function(t){s=t.detail.value},setPayType:function(t){this.pay_type=t},formSubmit:function(t){console.log("wwwwwww");o=t.detail.value.comment,uni.request({url:i.apiHost+"?m=order&a=order&ajax=1&authcode="+i.getAuthCode(),header:{"content-type":"application/x-www-form-urlencoded"},data:{cart_id:n,user_address_id:s,pay_type:this.pay_type,comment:o},method:"POST",success:function(t){uni.showToast({title:t.data.message}),t.data.error||uni.redirectTo({url:"/pages/order/success"})}})},wxpay:function(t){t=t;uni.request({url:i.apiHost+"?fromapp=wxapp&m=recharge_wxapp_pay&a=go",data:{order_id:t,openid:uni.getStorageSync("openid")},success:function(t){uni.requestPayment({appId:t.data.appId,timeStamp:t.data.timeStamp,nonceStr:t.data.nonceStr,package:t.data.package,signType:"MD5",paySign:t.data.paySign,success:function(t){uni.redirectTo({url:"/pages/order/show?order_id="+t.data.data.order_id})},fail:function(t){uni.redirectTo({url:"/pages/order/show?order_id="+t.data.data.order_id})}})},fail:function(t){console.log(t)}})}}};a.default=r},ea32:function(t,a,e){"use strict";var i=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("v-uni-view",{staticClass:"bg-ef"},[t.pageLoad?e("v-uni-form",{on:{submit:function(a){a=t.$handleEvent(a),t.formSubmit(a)}}},[e("v-uni-view",{staticClass:"row-box mgb-10"},[e("v-uni-view",{staticClass:"row-box-hd mgb-10"},[t._v("收货地址"),e("v-uni-view",{staticClass:"flex-1"}),e("v-uni-view",{staticClass:" f14 cor2",on:{click:function(a){a=t.$handleEvent(a),t.goAddress()}}},[t._v("新增地址")])],1),e("v-uni-radio-group",{staticClass:"radio-group",on:{change:function(a){a=t.$handleEvent(a),t.setAddress(a)}}},t._l(t.pageData.address,function(a,i,s){return e("v-uni-view",{key:i,staticClass:"mgb-10 flex"},[e("v-uni-radio",{attrs:{value:a.id,checked:0==s}}),t._v(t._s(s)+" "+t._s(a.truename)+" "+t._s(a.telephone)+" "+t._s(a.pct_address))],1)}))],1),e("v-uni-view",{staticClass:"row-box mgb-10"},[e("v-uni-view",{staticClass:"f16"},[t._v("商品列表")]),e("v-uni-view",{staticClass:"flexlist"},t._l(t.pageData.prolist,function(a,i){return e("v-uni-view",{key:i,staticClass:"flexlist-item"},[e("v-uni-view",{staticClass:"none"},[e("v-uni-input",{attrs:{type:"text",name:"cart_id[]",value:a.id}})],1),e("v-uni-view",{staticClass:"flexlist-imgbox"},[e("img",{staticClass:"flexlist-img",attrs:{src:a.imgurl+".100x100.jpg"}})]),e("v-uni-view",{staticClass:"flex-1"},[e("v-uni-view",{staticClass:"flexlist-title"},[t._v(t._s(a.title))]),e("v-uni-view",{staticClass:"flex"},[""!=a.ks_title?e("v-uni-view",{staticClass:"cl2 mgr-10"},[t._v(t._s(a.ks_title))]):t._e(),e("v-uni-view",{staticClass:"cl-money mgr-10"},[t._v("￥ "+t._s(a.price))]),e("v-uni-view",{staticClass:"cl2"},[t._v("x "+t._s(a.amount))])],1)],1)],1)}))],1),e("v-uni-view",{staticClass:"row-box mgb-10"},[e("v-uni-view",{staticClass:"cart-stat mgb-10 flex"},[t._v("商品：￥"),e("v-uni-text",{staticClass:"cl-money"},[t._v(t._s(t.pageData.goods_money))]),t._v("元 \n\t\t\t\t  邮费：￥"),e("v-uni-text",{staticClass:"cl-money"},[t._v(t._s(t.pageData.express_fee))]),t._v("元  \n\t\t\t\t  总价：￥"),e("v-uni-text",{staticClass:"cl-money"},[t._v(t._s(t.pageData.total_money))])],1),e("v-uni-view",{staticClass:"cart-stat flex"},[t._v("账户余额："),e("v-uni-text",{staticClass:"clmoney"},[t._v(t._s(t.pageData.user.money))]),t._v("元")],1)],1),e("v-uni-view",{staticClass:"row-box mgb-10"},[e("v-uni-view",{staticClass:"row-box-hd mgb-10"},[t._v("支付方式")]),e("v-uni-view",{staticClass:"paylist"},[e("v-uni-view",{staticClass:"none"},[e("v-uni-input",{attrs:{type:"hidden",name:"pay_type",id:"pay_type",value:t.pay_type}})],1),t._l(t.pageData.pay_type_list,function(a,i){return e("v-uni-view",{key:i,staticClass:"paylist-item",class:i==t.pay_type?"paylist-item-active":"",on:{click:function(a){a=t.$handleEvent(a),t.setPayType(i)}}},[t._v(t._s(a))])})],2)],1),e("v-uni-view",{staticClass:"row-box"},[e("v-uni-view",{staticClass:"mgb-10"},[e("v-uni-textarea",{staticClass:"h60",attrs:{name:"comment",placeholder:"请输入订单需求"}})],1),e("v-uni-button",{staticClass:"btn-row-submit",attrs:{type:"primary","form-type":"submit"}},[t._v("确认下单")])],1)],1):t._e()],1)},s=[];e.d(a,"a",function(){return i}),e.d(a,"b",function(){return s})}}]);